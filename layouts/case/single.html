{{define "main"}}
<div class="dark:bg-blue-950">
  <div class="max-w-7xl mx-auto px-6 lg:px-8 py-16 lg:py-24">
    {{ with .Params.image }}
      <div class="flex justify-center max-w-5xl mx-auto aspect-w-16 aspect-h-8">
        {{ partial "components/image-responsive" (dict "src" (. | relLangURL) "alt" $.Title "class" "rounded-2xl w-full h-full object-center object-cover shadow-2xl" "sizes" "(min-width: 1024px) 50vw, 100vw" "widths" (slice 640 1024 2048)) }}
      </div>
    {{ end }}
    <div class="mt-10 lg:mt-20 mb-10 lg:mb-16 max-w-3xl mx-auto text-center space-y-4 lg:space-y-5">
      {{ if .Params.categories }}
        <div class="gap-x-3 flex justify-center capitalize">
          {{ range .Params.categories }}<span class="px-4 py-2.5 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-500 text-sm font-medium leading-none tracking-wider uppercase inline-block flex-shrink-0">{{ . }}</span>{{ end }}
          <time datetime="2020-03-16" class="inline-flex rounded-full text-slate-800 dark:text-slate-200 bg-slate-100 dark:bg-primary-800 uppercase tracking-wider leading-none font-medium text-sm px-4 py-2.5">
            {{ dateFormat "Jan 02, 2006" .Date }}
          </time>    
        </div>
      {{ end }}    
      <h1 class="text-center text-5xl sm:text-6xl font-bold tracking-tight text-primary-950 dark:text-white">{{ .Title | markdownify }}</h1>
      {{ with .Params }}
        {{ partial "components/subheading.html" . }}
      {{ end }}
    </div>
    {{ $blocks := .Params.blocks }}
    {{ $showContent := true }}
    {{ range $blocks }}
      {{ if eq .block "content" }}
        <div class="mt-10 lg:mt-16 mx-auto prose sm:prose-lg dark:prose-invert prose-headings:scroll-mt-32 hover:prose-a:text-primary-500">
          {{ $.Page.Content }}
        </div>
        {{ $showContent = false }}
      {{ else }}
        {{ $file := (printf "%s%s%s" "blocks/" .block ".html" ) }}
        {{ partial $file . }}
      {{ end }}
    {{ end }}  
    {{ if $showContent }}
      <div class="mt-10 lg:mt-16 mx-auto prose sm:prose-lg dark:prose-invert prose-headings:scroll-mt-32 hover:prose-a:text-primary-500">
        {{ .Content }}
      </div>
    {{ end }}
    <div class="mt-16 lg:mt-20 max-w-md lg:max-w-none mx-auto">
      <h2 class="text-3xl sm:text-4xl font-bold tracking-tight dark:text-white text-center">{{ i18n "more_case_studies" }}</h2>
      <div class="grid gap-8 lg:gap-10 lg:grid-cols-2 mt-10 lg:mt-14">
        {{ $posts := where site.RegularPages "Section" "case" }}
        {{ range first 2 (where $posts "Title" "!=" .Title) }}
          {{ partial "card-post.html" . }} 
        {{ end }}
      </div>
    </div>
  </div>
</div>
{{end}}

